$(function(){var e={dictDefaultMessage:null,dictFallbackMessage:null,dictFallbackText:null,dictInvalidFileType:null,dictFileTooBig:null,dictResponseError:null,dictCancelUpload:null,dictCancelUploadConfirmation:null,dictRemoveFile:null,dictMaxFilesExceeded:null,targetZone:".file-upload",addRemoveLinks:!0,headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},parallelUploads:5,maxFiles:5,acceptedFiles:"image/*",previewsContainer:null},i={common:function(i){$.extend(!0,e,i||{})},handleErrorSummary:function(){var e=$("#report-create-form > .error__sum");$(".field-reportform-pictures").removeClass("has-error").slideUp(),$(".has-error").length>0?e.slideDown():e.slideUp()},init:function(l){var t=$(l.targetZone);if(l=$.extend(!0,{},e,l||{}),!t.length)return!1;var n=t&&t.data("upload-url"),a=t&&t.data("delete-url"),r=t&&t.data("input-name")+"[]";if(n){var o={url:n,removedfile:function(e){var i=e.name;$.ajax({type:"POST",url:a,data:{fileName:i},dataType:"html"});var l=e.previewElement;return null!==l?l.parentNode.removeChild(e.previewElement):0},init:function(){var e=this;e.on("complete",function(e){var i=t;l.previewsContainer&&(i=$(l.previewsContainer)),"success"===e.status&&i.find(".dz-preview:last").append('<input type="hidden" name="'+r+'" value="'+e.name+'">')}),e.on("addedfile",function(e){if(this.files.length){var l,t;for(l=0,t=this.files.length;l<t-1;l++)this.files[l].name===e.name&&this.files[l].size===e.size&&this.files[l].lastModifiedDate.toString()===e.lastModifiedDate.toString()&&this.removeFile(e)}i.handleErrorSummary()}),e.on("removedfile",function(){}),e.on("maxfilesexceeded",function(i){e.removeFile(i)}),e.on("maxfilesreached",function(){})}};o=$.extend(!0,{},o,l||{}),t.dropzone(o)}return!0}};$(function(){i.common({dictRemoveFile:"",dictMaxFilesExceeded:"Elérted a képfeltöltés limitet."}),i.init({targetZone:".file-upload--report"}),i.init({targetZone:".file-upload--comment",previewsContainer:".file-upload--previews",clickable:".file-upload--comment, .file-upload--previews",errorBlock:".comment__body .help-block"})})});