!function(t,a){"use strict";function i(a,i,s){this.el=a,this.$el=t(this.el),this.$source=s,this.$scope=t(""),this.validations=[],this.options=t.extend(!0,{},e,i),this.options.init&&(this.validateScope(),this.bindEvents())}var e={init:!0,selector:"[validate]",prefix:"validate-",css:"",scope:"this",preset:{email:/\S+@\S+\.\S+/},classes:{valid:"validate--valid",invalid:"validate--invalid"}};return i.prototype.validateScope=function(){var a=this;if(a.$source)a.$scope=a.$source;else switch(a.options.scope){case"this":this.$scope=a.$el;break;case"next":this.$scope=a.$el.next();break;case"parent":this.$scope=a.$el.parent();break;default:if(this.$scope=a.$el.closest(a.options.scope),!a.$scope.length)throw Error("Invalid scope")}a.$scope.find("[valid]").each(function(){a.attachValidations(t(this))})},i.prototype.getValidation=function(t){var a=this,i=/.*/;switch(t){case"email":i=a.options.preset.email;break;default:i=t instanceof RegExp?t:new RegExp(t)}return i},i.prototype.attachValidations=function(a){var i=this,e=a.attr("valid");a.each(function(){var s=t(this);s.data("validate-valid",i.getValidation(e)),s.data("validate-scope",a[0]===i.el?i.$scope:s),i.validations.push(s)})},i.prototype.bindEvents=function(){var a=this;this.$el.on("input",function(){var i=t(this),e=i.val();a.validations.forEach(function(t){var i=t.data("validate-valid").test(e),s=t.data("validate-scope");i?(s.addClass(a.options.classes.valid),s.removeClass(a.options.classes.invalid)):(s.removeClass(a.options.classes.valid),s.addClass(a.options.classes.invalid))})})},t.fn.validate=function(a){return this.each(function(){var s=t(this),n=s.attr("validate"),o=t(n),l=t.extend(a,{css:s.attr(e.prefix+"css"),scope:s.attr(e.prefix+"scope")});return o.length?o.each(function(){return!!t(this).data("validate")||t(this).data("validate",new i(this,l,s))}):!!s.data("validate")||s.data("validate",new i(this,l))})},t.extend(a,{Validate:{init:function(){t("input[validate]").validate({scope:".input-group",classes:{valid:"input--valid",invalid:"input--invalid"}}),t("[validate]").validate()}}})}(jQuery,site||{}),$(site.Validate.init);